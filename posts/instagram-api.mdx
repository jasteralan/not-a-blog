---
title: "Instagram API"
brief: "è¨˜éŒ„ä¸€ä¸‹æ€éº¼æ‹¿åˆ° Instgram ä¸Šçš„ç…§ç‰‡"
icon: 'ğŸ“·'
publish: true
releasedAt: "2021-07-25"
---

## [Instagram åŸºæœ¬é¡¯ç¤º API](https://developers.facebook.com/docs/instagram-basic-display-api)


1. ç€è¦½å™¨ä¸Šé€£åˆ°
```shell
https://api.instagram.com/oauth/authorize
  ?client_id={CLIENT_ID}
  &redirect_uri={REDIRECT_URI}
  &scope=user_profile,user_media
  &response_type=code
```

<Br />

2. å‡ºç¾æˆæ¬Šè¦æ±‚ï¼ŒåŒæ„å¾Œæœƒå°åˆ° `REDIRECT_URI?code={CODE}`

æˆæ¬Šç¢¼å±¬æ–¼çŸ­æœŸä»£ç¢¼ï¼Œæœ‰æ•ˆæ™‚é–“åƒ… 1 å°æ™‚

<Br />

3. æ‹¿ `code` æ› `token`
```
curl -X POST https://api.instagram.com/oauth/access_token \ 
  -F client_id={CLIENT_ID} \ 
  -F client_secret={CLIENT_SECRET} \ 
  -F grant_type=authorization_code \ 
  -F redirect_uri={REDIRECT_URI} \ 
  -F code={CODE}

// Response
{
    "access_token": "...", 
    "user_id": ...
}
```

<Br />

4. æ‹¿ä¸Šé¢çš„ `user_id` å’Œ `access_token` ä¾†ç”¨
```
curl -X GET \ 
'https://graph.instagram.com/{user_id}?fields=id,media_type,media_url,username,timestampï¼†access_token={access_token}'


// Response è³‡æ–™æ ¼å¼
{
    data: {
        id: string, // image id
        caption: string
    }[],
    paging: {
        "cursors": { "before": string, "after": string },
        "next": string // graph url 
    }
}
```

<Br />

5. `paging.next` å–å¾—ä¸‹ä¸€æ‰¹è³‡æ–™
```
curl -X GET {paging.next}
```

<Br />

6. `data.id` å–å¾—æ¯ä¸€å¼µåœ–çš„è³‡æ–™
```
curl -X GET \
'https://graph.instagram.com/{id}?fields=id,media_type,media_url,username,timestamp&access_token={access_token}'

{
    "id": string, // image id
    "media_type": "IMAGE",
    "media_url": string, // image url
    "username": string,
    "timestamp": string // YYYY-MM-DDTHH:mm:ss+0000
}
```

<Br />

é‚„ä¸ç¢ºå®šæ€éº¼èƒŒæ™¯åŸ·è¡Œï¼Œç¸½ä¹‹ç•™é»è¨˜éŒ„

æ„Ÿè¦ºæ˜¯ä¸æƒ³è®“ä½¿ç”¨è€…å¤ªæ–¹ä¾¿å–å¾—æ‰€æœ‰åœ–ç‰‡ï¼Œæ•´é«”æ“ä½œç›¸ç•¶éº»ç…©ï¼Œ
[Instagram åœ–å½¢ API](https://developers.facebook.com/docs/instagram-api)åªæœ‰è®“å°ˆæ¥­å¸³è™Ÿç”¨ï¼Œ
èªªä¸å®šå°±èƒ½å¤ æ‰¹æ¬¡å–å¾—åœ–ç‰‡ç¶²å€ï¼ˆå§